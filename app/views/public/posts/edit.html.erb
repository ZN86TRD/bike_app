<div class="container mt-5">
  <div class="row">
    <div class="col-md-6 mx-auto">
      <h3>投稿編集</h3>
      <%= form_with model: @post, local: true do |f| %>
        <%= render 'public/shared/error_messages', obj: @post %>
        <div class="form-group mb-3 text-center">
        <%= f.label :image, "投稿画像", class: "d-block mb-2" %>

        <div id="post-preview-container" class="mb-3">
          <% if @post.image.attached? %>
            <%= image_tag @post.image.variant(resize_to_limit: [400, 400]).processed, id: "post-image-preview", class: "img-fluid rounded shadow-sm", style: "max-height: 200px; object-fit: contain;" %>
          <% else %>
            <img id="post-image-preview" src="" class="img-fluid rounded shadow-sm d-none" style="max-height: 200px; object-fit: contain;">
          <% end %>
        </div>
          <%= f.file_field :image, accept: "image/jpeg,image/jpg,image/png", id: "post-image-input", class: "form-control-file d-block mx-auto" %>
        </div>
        <div class="form-group mb-3">
          <%= f.label :title, "タイトル" %>
          <%= f.text_field :title, class: "form-control" %>
        </div>
        <div class="form-group mb-3">
          <%= f.label :body, "本文" %>
          <%= f.text_area :body, class: "form-control", rows: 5 %>
        </div>
        <div class="form-group mb-4">
          <%= f.label :address, "スポットの場所・住所" %>
          <%= f.text_field :address, class: "form-control", placeholder: "住所を入力" %>
        </div>
        <div class="d-flex justify-content-between mt-4">
          <%= link_to "戻る", post_path(@post), class: "btn btn-outline-secondary w-50 mr-2" %>
          <%= f.submit "更新する", class: "btn btn-primary w-50" %>
      <% end %>
    </div>
  </div>
</div>
